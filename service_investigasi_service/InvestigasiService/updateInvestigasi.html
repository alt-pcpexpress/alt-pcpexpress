<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the updateInvestigasi method from the InvestigasiService class, for the Dart programming language.">
  <title>updateInvestigasi method - InvestigasiService class - investigasi_service library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">

  
</head>


<body data-base-href="../../" data-using-base-href="false" class="light-theme">

<div id="overlay-under-drawer"></div>

<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">my_pcp</a></li>
    <li><a href="../../service_investigasi_service/service_investigasi_service-library.html">service\investigasi_service.dart</a></li>
    <li><a href="../../service_investigasi_service/InvestigasiService-class.html">InvestigasiService</a></li>
    <li class="self-crumb">updateInvestigasi method</li>
  </ol>
  <div class="self-name">updateInvestigasi</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button" title="Toggle brightness">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        dark_mode
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        light_mode
      </span>
    </label>
  </div>
</header>
<main>

<div
    id="dartdoc-main-content"
    class="main-content"
    data-above-sidebar="service_investigasi_service&#47;InvestigasiService-class-sidebar.html"
    data-below-sidebar="">
    <div>
<h1><span class="kind-method">updateInvestigasi</span> method 
</h1></div>

    <section class="multi-line-signature">
      

<span class="returntype"><a href="https://api.flutter.dev/flutter/dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/Map-class.html">Map</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span>, <span class="type-parameter">dynamic</span>&gt;</span></span>&gt;</span></span>
<span class="name ">updateInvestigasi</span>(<wbr>{<ol class="parameter-list"> <li><span class="parameter" id="updateInvestigasi-param-fikId"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">fikId</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-awbNo"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">awbNo</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-branchId"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">branchId</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-officeSiteId"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">officeSiteId</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-receiverName"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">receiverName</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-receiverAddress"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">receiverAddress</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-podRN1"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">podRN1</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-podRN2"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">podRN2</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-podAR1"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">podAR1</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-podAR2"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">podAR2</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-investigNotes"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">investigNotes</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-statusId1"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">statusId1</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-statusId"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">statusId</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-userId"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">userId</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-imagedata"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-typed_data/Uint8List-class.html">Uint8List</a></span>&gt;</span></span> <span class="parameter-name">imagedata</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-signatureData"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-typed_data/Uint8List-class.html">Uint8List</a></span> <span class="parameter-name">signatureData</span>, </span></li>
<li><span class="parameter" id="updateInvestigasi-param-context"><span>required</span> <span class="type-annotation"><a href="https://api.flutter.dev/flutter/widgets/BuildContext-class.html">BuildContext</a></span> <span class="parameter-name">context</span>, </span></li>
</ol>})

      

    </section>
    


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">Future&lt;Map&lt;String, dynamic&gt;&gt; updateInvestigasi({
  required String fikId,
  required String awbNo,
  required String branchId,
  required String officeSiteId,
  required String receiverName,
  required String receiverAddress,
  String? podRN1,
  String? podRN2,
  String? podAR1,
  String? podAR2,
  required String investigNotes,
  String? statusId1,
  String? statusId,
  String? userId,
  required List&lt;Uint8List&gt; imagedata,
  required Uint8List signatureData,
  required BuildContext context,
}) async {
  &#47;&#47; Validation checks
  if (receiverName.isEmpty) {
    return {&#39;status&#39;: false, &#39;msg&#39;: &#39;Receiver name is required&#39;};
  }
  if (receiverAddress.isEmpty) {
    return {&#39;status&#39;: false, &#39;msg&#39;: &#39;Receiver address is required&#39;};
  }
  if (podRN1 == null &amp;&amp; podRN2 == null) {
    return {&#39;status&#39;: false, &#39;msg&#39;: &#39;At least one POD RN is required&#39;};
  }
  if (podAR1 == null &amp;&amp; podAR2 == null) {
    return {&#39;status&#39;: false, &#39;msg&#39;: &#39;At least one POD AR is required&#39;};
  }
  if (imagedata.isEmpty) {
    return {&#39;status&#39;: false, &#39;msg&#39;: &#39;At least one image is required&#39;};
  }
  if (signatureData.isEmpty) {
    return {&#39;status&#39;: false, &#39;msg&#39;: &#39;Signature data is required&#39;};
  }

  try {
    &#47;&#47; Construct URL parameters
    String url = &quot;mobile&#47;UpdateInvestigasiMobile&quot;;
    url += &quot;?fikId=$fikId&quot;;
    url += &quot;&amp;awbNo=$awbNo&quot;;
    url += &quot;&amp;branchId=$branchId&quot;;
    url += &quot;&amp;officeSiteId=$officeSiteId&quot;;
    url += &quot;&amp;receiverName=${Uri.encodeComponent(receiverName)}&quot;;
    url += &quot;&amp;receiverAddress=${Uri.encodeComponent(receiverAddress)}&quot;;
    url += &quot;&amp;podRN1=$podRN1&quot;;
    url += &quot;&amp;podRN2=$podRN2&quot;;
    url += &quot;&amp;podAR1=$podAR1&quot;;
    url += &quot;&amp;podAR2=$podAR2&quot;;
    url += &quot;&amp;investigNotes=${Uri.encodeComponent(investigNotes)}&quot;;
    url += &quot;&amp;statusId1=$statusId1&quot;;
    url += &quot;&amp;statusId=$statusId&quot;;
    url += &quot;&amp;userId=$userId&quot;;
&#47;&#47; Create FormData for photos and signature
    List&lt;Map&lt;String, String&gt;&gt; photos = [];
    RandomString rs = RandomString();
    for (Uint8List image in imagedata) {
      String randomImageName = &quot;${rs.getRandomString(
        uppersCount: 3,
        lowersCount: 3,
        numbersCount: 3,
        specialsCount: 1,
        specials: &#39;_xx&#39;,
      )}.jpg&quot;;
      String base64Image = base64Encode(image);
      photos.add({&#39;filename&#39;: randomImageName, &#39;data&#39;: base64Image});
    }
    String signame = &#39;${DateTime.now().millisecondsSinceEpoch}.jpg&#39;;
    String base64Signature = base64Encode(signatureData);

    FormData formData = FormData.fromMap({
      for (int i = 0; i &lt; photos.length; i++) ...{
        &#39;pathFilePhoto$i&#39;: photos[i][&#39;filename&#39;],
        &#39;dataFilePhoto$i&#39;: photos[i][&#39;data&#39;],
      },
      &#39;pathFileSignature&#39;: signame,
      &#39;dataFileSignature&#39;: base64Signature,
    });
    final Response response = await ApiClient().post(url, formData);
    if (response.statusCode == 200) {
      var jsonResponse = response.data;
      if (jsonResponse[&#39;status&#39;]) {
        return {&#39;status&#39;: jsonResponse[&#39;status&#39;], &#39;msg&#39;: &#39;Data berhasil disimpan&#39;};
      } else {
        return {&#39;status&#39;: jsonResponse[&#39;status&#39;], &#39;msg&#39;: &#39;Data gagal disimpan (${jsonResponse[&#39;msg&#39;]})&#39;};
      }
    } else {
      throw Exception(&#39;Failed to save data&#39;);
    }
  } catch (e) {
    return {&#39;status&#39;: false, &#39;msg&#39;: &#39;Error: $e&#39;};
  }
}</code></pre>
</section>


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">my_pcp</a></li>
    <li><a href="../../service_investigasi_service/service_investigasi_service-library.html">investigasi_service</a></li>
    <li><a href="../../service_investigasi_service/InvestigasiService-class.html">InvestigasiService</a></li>
    <li class="self-crumb">updateInvestigasi method</li>
</ol>


    <h5>InvestigasiService class</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
</div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    my_pcp
      1.0.0+12
  </span>

  
</footer>



<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>



</body>

</html>

